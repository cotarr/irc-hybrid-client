
<!-- server-form-panel -->

<template id='serverFormPanelTemplate'>
  <link rel="stylesheet" href="css/styles.css">
  <div id="panelVisibilityDivId" class="global-visibility-div">
    <div id="panelDivId" class="global-panel-style-div server-form-theme-light">
      <div class='global-head-flex'>
        <div class="global-head-left">
          <button id="closePanelButtonId" title="Hide Panel" class="global-show-hide-button mr5">x</button>
          <span>IRC Server Configuration</span>
        </div>
        <div class="global-head-center">
        </div>
        <div class="global-head-right">
        </div>
      </div>
      <div class="vh20"></div>


      <div class="form-style-div>">
        <div>
          <button id="saveNewButtonId" hidden>Save</button>
          <button id="saveModifiedButtonId"hidden>Save</button>
          <button id="cancelEditButtonId">Cancel</button>
          <a href="/irc/docs/server-config.html">
          <button id="showHelpDocsButton" hidden>Help</button></a>
        </div>
        <div class="vh10"></div>
        <div>
          <div class="server-form-required-input"></div>
          <span> - Required Field</span>
        </div>
        <div class="vh10"></div>
        <div class="server-form-input-group2">
          <div class="vh10"></div>
          <div class="mb5" hidden>
            <input type="number" id="indexInputId" value="" readonly>
            <div class="global-inline-block">index</div>
          </div>
          <div class="mb5">
            <div class="server-form-optional-input"></div>
            <input type="checkbox" id="disabledCheckboxId">
            <div class="global-inline-block">Disable/Hide this IRC server definition</div>
            <button id="disabledCheckboxInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="disabledCheckboxInfo" hidden>
            <p>
              The Disable/Hide checkbox is used to prevent an individual IRC server definition from 
              being selected using the [Next], [Prev] buttons in the web client.
              Disabled IRC server definitions are excluded from automatic server rotation when connections fail.
            </p>
            <p>
              IRC server definitions may also be enabled or disabled using the checkboxes in the main IRC server table (previous screen).
            </p>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <div class="mb5">
            <div class="server-form-required-input"></div>
            <input type="number" id="groupInputId" class="server-form-group-input" value="">
            <div class="global-inline-block">Server Rotation Group Number</div>
            <button id="groupInputInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="groupInputInfo" hidden>
            <p>
              The &quot;Server Rotation Group Number&quot; column defines an integer group number. 
              Groups are used to configure and define a common group of IRC server definitions.
              In the event of IRC server network connection failures, 
              different IRC servers within a common group number can be 
              automatically rotated to other servers in the group.
              Group 0 is reserved for stand alone servers.
              A rotation group is defined when the group number is 1 or greater . 
              If more than two server in a group are not disabled and both have the 
              Auto Reconnect property enabled, then upon disconnect, the client will 
              automatically rotate IRC server definitions within a server group.
              In typical use, a server group would allow different IRC networks 
              such as DALnet or Undernet to have different group numbers.
            </p>
            <ul>
              <li>The Group input field accepts integer values 0 to 9999</li>
              <li>Group 0 is used to define individual IRC server addresses that do not rotate.</li>
              <li>
                Group 1 or greater defines a set of server where servers of the same group number 
                will automatically rotate after disconnect.
              </li>
              <li>
                Each server in the group must have &quot;Auto Reconnect&quot; enabled.
              </li>
            </ul>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <div class="mb5">
            <div class="server-form-required-input"></div>
            <input type="text" id="nameInputId" value="">
            <div class="global-inline-block">Label</div>
            <button id="nameInputInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="nameInputInfo" hidden>
            <p>
              The &quot;Label&quot; is used to provide a descriptive name for an IRC server definition.
              The Label is not otherwise used, and it may contain any arbitrary string values.
              If you are using a small screen smartphone, it is best to keep the Label short.
            </p>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <div class="mb5">
            <div class="server-form-optional-input"></div>
            <input type="checkbox" id="autoReconnectCheckboxId">
            <div class="global-inline-block">Automatic Reconnect</div>
            <button id="autoReconnectCheckboxInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="autoReconnectCheckboxInfo" hidden>
            <p>
              When the Automatic Reconnect checkbox is checked, after disconnect, the IRC
              client will attempt to reconnect to IRC. For the first try, it will use 
              the existing server definition and existing nickname. 
              In the case where first reconnect 
              attempt using the same IRC server and nickname fails, if additional 
              IRC servers have been defined within a Group, other IRC server 
              definitions will be tried. Upon reconnect, it will attempt to 
              re-join up to 5 channels that were open at the time of disconnection. 
              This feature does not support channel passwords.
            </p>
            <p>
              At this time there are no provisions to configure a server to auto-connect 
              to IRC on startup. There is no provision to auto-join channels on startup.
            </p>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <div class="mb5">
            <div class="server-form-optional-input"></div>
            <input type="checkbox" id="loggingCheckboxId">
            <div class="global-inline-block">Log IRC raw server messages</div>
            <button id="loggingCheckboxInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="loggingCheckboxInfo" hidden>
            <p>
              When the log checkbox is checked, the raw IRC messages from the IRC server
              are written the file &quot;irc.log&quot; located in the logs folder.
              Caution should be used as logging of passwords or other bot credentials
              may occur. Some filters are included to redact common password syntax
              before writing to the log, but the list may not include all possibilities.
              This is really intended for debugging. There are obvious privacy concerns here. 
              It is recommended to leave this set to false.
            </p>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
        </div>

        <div class="vh10"></div>

        <div class="server-form-input-group">
          <h3>IRC Server Connection</h3>
          <div class="mb5">
            <div class="server-form-required-input"></div>
            <input type="text" id="hostInputId" value="">
            <div class="global-inline-block">IRC Server: Host or IP</div>
            <button id="hostInputInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="hostInputInfo" hidden>
            <p>
              The IRC server address, port, and TLS settings are similar to other IRC clients.
              The IRC server address may be entered as a fully qualified domain name, 
              an IPV4 address, or an IPV6 address. An IPV6 address should not include 
              brackets [...]. The port number should not be appended to the address.
            </p>
            <p>
              Caution: In the web server settings, if the outbound IRC network 
              socket address has been specified by use of an IP address, then the IRC server 
              address defined here must be the same IPV4/IPV6 family as the 
              bound interface. This could be an issue where IRC server domain names
              lookup both IPV4 and IPV6 addresses. Many IRC networks provide
              family specific domain names such as &quot;ipv6.dal.net&quot;.
            </p>
            <ul>
              <li>Hostname: irc.example.com</li>
              <li>IPV4 Address: 192.168.1.50</li>
              <li>IPV6 Address: fc00:1234::5678</li>
            </ul>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <div class="mb5">
            <div class="server-form-required-input"></div>
            <input type="number" id="portInputId" class="server-form-port-input" value="">
            <div class="global-inline-block">IRC Server: Port</div>
          </div>
          <div class="mb5">
            <div class="server-form-required-input"></div>
            <input type="checkbox" id="tlsCheckboxId">
            <div class="global-inline-block">Use TLS</div>
            <input type="checkbox" id="verifyCheckboxId">
            <div class="global-inline-block">TLS certificate verify</div>
          </div>
          <div class="mb5">
            <div class="server-form-optional-input"></div>
            <input type="checkbox" id="proxyCheckboxId">
            <div class="global-inline-block">Use Socks5 Proxy if available.</div>
            <button id="proxyCheckboxInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="proxyCheckboxInfo" hidden>
            <p>
              The irc-hybrid-client has limited capability to connect 
              to an IRC server using a socks5 network proxy. The configuration 
              settings for the socks5 proxy are defined in the web server 
              configuration credentials.json file or with environment variables.
              Configuration is explained in the Login Config section of /docs.
            </p>
            <p>
              Socks5 is a pure network protocol and does not include encryptions.
              For privacy, is recommended to use TLS inside the proxy network connection.
            </p>
            <p>
              If a socks5 proxy has been defined in the web server configuration,
              the each individual IRC server definition will have the option to 
              use the Socks5 Proxy to connect to the IRC server.
              The current sock5 proxy address, if configured, will be displayed 
              at the bottom of the server list page.
            </p>
            <ul>
              <li>Check the box to use socks5 network proxy for this server.</li>
            </ul>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <div class="mb5">
            <div>
              <div class="server-form-optional-input"></div>
              <input type="text" id="passwordInputId" value="">
              <div class="global-inline-block">IRC server password (Optional) </div>
              <button id="replacePasswordButton">Replace</button>
              <button id="passwordInputInfoBtn">?</button>
            </div>
            <div id="serverPasswordWarningDiv">
              <ul>
                <li>Enter new IRC server password, then press [Save] button</li>
                <li>To clear previous entry, leave blank and press [Save] button</li>
                <li>To abort changing the previous value, press [Cancel] button above</li>
                <li>It is not possible to view the previous password from the web browser.</li>
              </ul>
              <div class="server-form-yellow-warning-div">
                Note: IRC server passwords will be stored unencrypted in clear text
                in &quot;servers.json&quot; located in the base folder of the web server.
              </div>
            </div>
            <div class="server-form-white-info-div" id="passwordInputInfo" hidden>
              <p>
                <Thead></Thead> IRC server password field is optional.
                It may be used for IRC servers that require a password in order to connect to the IRC network.
                The password is a write-only field and the current value may not be viewed from 
                the web page for security reasons.
              </p>
              <p>
                Security note: The IRC server password is stored in plain text in 
                the servers.json file, and it may be viewed there.
              </p>
              <p>
                Click the [?] again to close this message.
              </p>
            </div>
          </div>
          <div class="mb5">
            <div class="server-form-optional-input"></div>
            <input type="text" id="saslUsernameInputId" value="">
            <div class="global-inline-block">IRC server SASL username (Optional)</div>
            <button id="saslUsernameInputInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="saslUsernameInputInfo" hidden>
            <p>
              The IRC Server SASL username is optional.
              If both SASL username and password contain valid string values, the SASL username 
              and SASL password will be sent to the IRC server during the initial connection.
            </p>
            <p>
              SASL authorization was added specifically for use with libera.chat and has not been 
              tested on any other IRC networks. 
            </p>
            <ul>
              <li>
                To disable, leave the SASL values blank.
              </li>
              <li>
                The only mechanism supported at this time is PLAIN. 
              </li>
              <li>
                In the event of a login failure, a standard IRC connection will be attempted without SASL. 
              </li>
            </ul>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <div class="mb5">
            <div>
              <div class="server-form-optional-input"></div>
              <input type="text" id="saslPasswordInputId" value="">
              <div class="global-inline-block">IRC server SASL password (Optional) </div>
              <button id="replaceSaslPasswordButton">Replace</button>
              <button id="saslPasswordInputInfoBtn">?</button>
            </div>
            <div id="serverSaslPasswordWarningDiv">
              <ul>
                <li>Enter new IRC server SASL password, then press [Save] button</li>
                <li>To clear previous entry, leave blank and press [Save] button</li>
                <li>To abort changing the previous value, press [Cancel] button above</li>
                <li>It is not possible to view the previous SASL password from the web browser.</li>
                <li>SASL mechanism: only <b>plain</b> is supported.</li>
              </ul>
              <div class="server-form-yellow-warning-div">
                Note: IRC server SASL passwords will be stored unencrypted in clear text
                in &quot;servers.json&quot; located in the base folder of the web server.
              </div>
            </div>
            <div class="server-form-white-info-div" id="saslPasswordInputInfo" hidden>
              <p>
                The IRC Server SASL password is optional.
                If both SASL username and password contain valid string values, the SASL username 
                and SASL password will be sent to the IRC server during the initial connection.
              </p>
              <p>
                SASL authorization was added specifically for use with libera.chat and has not been 
                tested on any other IRC networks. 
              <p>
                The SASL password is a write-only field and the current value may not be viewed from the web page for security reasons. Security note: The SASL password is stored in plain text in the servers.json file, and it may be viewed there.
              </p>
              </p>
              <ul>
                <li>
                  To disable, leave the SASL values blank.
                </li>
                <li>
                  The only mechanism supported at this time is PLAIN. 
                </li>
                <li>
                  In the event of a login failure, a standard IRC connection will be attempted without SASL. 
                </li>
              </ul>
              <p>
                Click the [?] again to close this message.
              </p>
            </div>
          </div>
        </div>

        <div class="vh20"></div>

        <div class="server-form-input-group">
          <h3>User Settings</h3>
          <div class="mb5">
            <div class="server-form-required-input"></div>
            <input type="text" id="nickInputId" value="">
            <div class="global-inline-block">User IRC nickname</div>
            <button id="nickInputInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="nickInputInfo" hidden>
            <p>
              The User IRC Nickname is the name you will known as when you sign into IRC.
              When you open the IRC client web page, the default nickname for a specific IRC server definition is the one specified here.
              At the time you connect to IRC, an different nickname may be specified on the IRC Controls panel, but it would revert to the one set here 
              for subsequent connections.
            </p>
            <p>
              Some characters are restricted like @ and + because they designate channel operator or voice. Allowed are 
              uppercase or lowercase characters, numbers, hyphens, underscores, square brackets, curly braces, backslash, backticks, or pipes. 
              Please note that different types of IRC servers have different requirements for the number of characters allowed in a nickname, 
              user or real name. These are often displayed in a server message when you first connect to IRC. At the present time, the maximum 
              length of these values is not checked by this program, so exceeding the limit set by the server would generate an IRC server error.
            </p>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <div class="mb5">
            <div class="server-form-optional-input"></div>
            <input type="text" id="altNickInputId" value="">
            <div class="global-inline-block">Alternate nickname (Disabled when blank)</div>
            <button id="altNickInputInfoBtn">?</button>
          </div>          
          <div class="server-form-white-info-div" id="altNickInputInfo" hidden>
            <p>
              If an optional alternate nickname is specified, it will be tried when the 
              primary nickname is not available. If the nickname recovery checkbox is checked, 
              should the primary nickname become available while the user is logged 
              in to IRC with the alternate nickname, automatic recovery of the primary 
              nickname will be attempted. 
            </p>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <div class="mb5">
            <div class="server-form-optional-input"></div>
            <input type="checkbox" id="recoverNickCheckboxId">
            <div class="global-inline-block">Attempt to auto-recover nickname from alternate.</div>
            <button id="recoverNickCheckboxInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="recoverNickCheckboxInfo" hidden>
            <p>
              The automatic recovery of a nickname can be cancelled at any time by using the /NICK command to change nicknames.
            </p>
            <p>
              In the case where an IRC server returns a 433 ERR_NICKNAMEINUSE prior to 
              nickname registration, the altNick value will be submitted as an alternate nickname. 
              If recoverNick is set to true, the automatic nickname recovery process will be activated by the 433 message. 
            </p>
            <p>
              In the case where an IRC server returns a 432 ERR_ERRONEUSNICKNAME prior to nickname registration, 
              the altNick value will be submitted as an alternate nickname. However, auto-recovery of the primary
              nickname is not enabled. This is because 432 is probably caused by a services/nickserv nickname lock, 
              and manual user intervention will most likely be needed to clear the 432 IRC server message.
            </p>
            <p>
              Upon IRC disconnect of the intended nickname, if the alternate nickname is in use at the time of disconnect, 
              the requested nickname will revert back to the primary nickname value. 
              The next connection event will therefore use the primary nickname. 
              If the use has entered an ad-hoc nickname value different from both the primary and alternate nicknames, 
              the ad-hoc nickname will persist after disconnect.
            </p>
            <p>
              If recoverNick is set to the true, the client will automatically attempt to recover the 
              primary nickname by sending a NICK command with the primary nickname. This is triggered in 2 ways. 
              If a ghost user with primary nickname is present in an IRC channel with the active alternate nickname, 
              a QUIT message will trigger immediate nickname recovery. Otherwise, a cycle timer will periodically 
              attempt to send NICK commands with the primary nickname until a time limit is reached. 
              The duration between attempts increases over time.
            </p>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <div class="mb5">
            <div class="server-form-required-input"></div>
            <input type="text" id="realInputId" value="">
            <div class="global-inline-block">User real name</div>
            <button id="realInputInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="realInputInfo" hidden>
            <p>
              The User real name field can be set to an arbitrary string value.
              This is the value shown for a user's /WHOIS request.
              Most people make up something interesting here, or duplicate their 
              nickname.
            </p>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <div class="mb5">
            <div class="server-form-required-input"></div>
            <input type="text" id="userInputId" value="">
            <div class="global-inline-block">Unix ident user (for address mask)</div>
            <button id="userInputInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="userInputInfo" hidden>
            <p>
              The Unix ident user is an IRC client property which will be 
              used by an IRC server for the case where the client computer 
              did not provide a response to an identd query to port 113.
              This is typically up to 8 alphabet characters without a space.
            </p>
            <p>
              This is a hold over from the original days of UNIX.
              When a client on a unix system makes an outbound connection request, 
              it was possible for the server receiving the request to query 
              back to the connecting computer's identd service on port 113.
              The server would provide the port number from the user's computer, 
              and the identd service would respond with the UNIX username 
              of the user's login account who is attempting the connection.
              With the advent of single user personal computers, the 
              identd service is not likely running, and no identd username 
              would be available. To satisfy the IRC server's username 
              value, an IRC client must provide a backup, self defined, username.
            </p>
            <p>
              On IRC, a user's /WHOIS response would prepend a tilde (~)
              character to the username as shown here, first UNIX username
              &quot;unixuser&quot; and backup client username &quot;myuser&quot;.
              Do not add the tilde, it is added automatically by the IRC server.
            </p>
<pre>
mynickname!unixuser@example.com
mynickname!~myuser@exmaple.com
</pre>            

            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <div class="mb5">
            <div class="server-form-optional-input"></div>
            <input type="text" id="modesInputId" value="">
            <div class="global-inline-block">Initial user modes Example: &quot;+i&quot; (Optional)</div>
            <button id="modesInputInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="modesInputInfo" hidden>
            <p>
              An IRC user has the ability to set various user modes using the format: /MODE username &lt;mode&gt;,
              where modes are a single letter preceded by a + or - character. For example, the letter i 
              is the invisible mode, set to +i or -i.
              Different IRC networks allow different mode letters. Each IRC network usually has a 
              help page showing allowed user modes.
            </p>
            <p>
              This field is a string value that is sent to the IRC server after a user connects. 
              This will be the initial user mode. A typical entry would be &quot;+i&quot;.
            </p>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
        </div>

        <div class="vh20"></div>

        <div class="server-form-input-group">
          <h3>Channel Preset Buttons</h3>
          <div class="mb5">
            <div class="server-form-optional-input"></div>
            <input type="text" id="channelListInputId" value="">
            <div class="global-inline-block">IRC Channels, Comma separated list (Optional)</div>
            <button id="channelListInputInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="channelListInputInfo" hidden>
            <p>
              The IRC channel list is a comma separated list of channel names. 
              In the client interface, a button will be created for each channel.
              Pressing the pre-defined button will cause the client 
              to /JOIN the channel listed on the button when pressed.
              Channel are not automatically joined on startup.
              The user must press the pre-defined channel buttons.
              Remember, channel names start with a pound sign like #mychannel.
            </p>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>
          <ul>
            <li>Example: <div class="server-form-white-example-div">#coolchannel, #lamechannel, #helpchannel</div></li>
          </ul>
        </div>

        <div class="vh20"></div>

        <div class="server-form-input-group">
          <h3>IRC Services</h3>
          <div class="mb5">
            <div class="server-form-optional-input"></div>
            <input type="text" id="identifyNickInputId" value="">
            <div class="global-inline-block">Nickserv identify nick (Optional) </div>
            <button id="identifyNickInputInfoBtn">?</button>
          </div>
          <div class="server-form-white-info-div" id="identifyNickInputInfo" hidden>
            <p>
              The IRC services section is optional. 
              Leave these field empty to disable this feature.
              The purpose is to send a user IDENTIFY message to a NickServ service during initial connect to IRC.
            </p>
            <ul>
              <li>The value entered here must exactly match the user's current IRC nickname, no no command is sent.</li>
              <li>If a backup nickname is used as fallback, the name will not match and no command is sent.</li>
            </ul>
            <p>
              Click the [?] again to close this message.
            </p>
          </div>


          <div class="mb5">
            <div>
              <div class="server-form-optional-input"></div>
              <input type="text" id="identifyCommandInputId" value="">
              <div class="global-inline-block">Nickserv identify command (Optional) </div>
              <button id="replaceIdentifyCommandButton">Replace</button>
              <button id="identifyCommandInputInfoBtn">?</button>
            </div>
            <div id="nickservCommandWarningDiv">
              <ul>
                <li>Enter new value, then press [Save] button</li>
                <li>To clear previous entry, leave blank and press [Save] button</li>
                <li>To abort changing the previous value, press [Cancel] button above</li>
                <li>It is not possible to view the previous identify command from the web browser.</li>
                <li>Example command: <div class="server-form-white-example-div">PRIVMSG NickServ :IDENTIFY xxxxxxxx</div></li>
                <li>Example command: <div class="server-form-white-example-div">PRIVMSG NickServ@services.dal.net :IDENTIFY xxxxxxxx</div></li>
                <li>Example command: <div class="server-form-white-example-div">NICKSERV IDENTIFY xxxxxxxx</div></li>
              </ul>
              <div class="server-form-yellow-warning-div">
                Note: NickServ command including any passwords will be stored unencrypted in clear text
                in &quot;servers.json&quot; located in the base folder of the web server.
              </div>
            </div>
            <div class="server-form-white-info-div" id="identifyCommandInputInfo" hidden>
              <p>
                The IRC services section is optional. 
                Leave these field empty to disable this feature.
                The purpose is to send a user IDENTIFY message to a NickServ service during initial connect to IRC.
              </p>
              <p>
                The command may contain passwords so it is a write-only value and the command
                may not be viewed from the web page. 
              </p>
              <ul>
                <li>This is a full IRC command, not an individual password.</li>
                <li>The command is stored in the servers.json files on the web server in plain text format.</li>
              </ul>
              <p>
                Example commands:
              </p>
<pre>
PRIVMSG NickServ :IDENTIFY xxxxxxxx
PRIVMSG NickServ@services.dal.net :IDENTIFY xxxxxxxx
NICKSERV IDENTIFY xxxxxxxx
</pre>
              <p>
                Click the [?] again to close this message.
              </p>
            </div>
          </div>
        </div>
      </div>
        <div class="vh20"></div>
    </div>
  </div>
</template>
